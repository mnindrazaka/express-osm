<html>

<head>
  <title>Open Street Map</title>
  <link rel="stylesheet" href="/public/vendor/leaflet/leaflet.css">
  <style>
    #map {
      height: 500px;
    }
  </style>
</head>

<body>
  <div id="map"></div>
  <script src="/public/vendor/leaflet/leaflet.js"></script>
  <script>
    var mymap = L.map('map').setView([-7.971526, 112.631373], 13)
    L.tileLayer('http://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
      attribution: 'Map data &copy; <a href="https://www.openstreetmap.org/">OpenStreetMap</a> contributors'
    }).addTo(mymap);

    // passing data dari controller ke script view
    const geojson = <%- JSON.stringify(geojson) %>;
    console.log(geojson)

    geojson.forEach(function (item) {
      item.coordinates.forEach(function(coordinate) {
        // menukar latitude dan longitude
        for (let i = 0; i < coordinate.length; i++) {
          const temp = coordinate[i][0]
          coordinate[i][0] = coordinate[i][1]
          coordinate[i][1] = temp
        }

        // menggambar peta
        L.polyline(coordinate, { color: '#000' }).addTo(mymap);
      })
    })

  </script>
</body>

</html>